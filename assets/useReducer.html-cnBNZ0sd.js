import { r as resolveComponent, c as createElementBlock, b as createStaticVNode, a as createVNode, o as openBlock } from "./app-Dscgj__W.js";
import { _ as _export_sfc } from "./plugin-vue_export-helper-1tPrXgE0.js";
const _sfc_main = {};
function _sfc_render(_ctx, _cache) {
  const _component_global_config = resolveComponent("global-config");
  return openBlock(), createElementBlock("div", null, [
    _cache[0] || (_cache[0] = createStaticVNode('<h1 id="usereducer" tabindex="-1"><a class="header-anchor" href="#usereducer"><span>useReducer</span></a></h1><p>è‹¥æƒ³è¯¦ç»†äº†è§£ï¼Œè¯·é˜…è¯»å¦‚ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><a href="https://zh-hans.react.dev/reference/react/useReducer" target="_blank" rel="noopener noreferrer">React å®˜æ–¹æ–‡æ¡£ - useReducer</a></li><li><a href="https://zh-hans.react.dev/learn/extracting-state-logic-into-a-reducer#comparing-usestate-and-usereducer" target="_blank" rel="noopener noreferrer">React å®˜æ–¹æ–‡æ¡£ - è¿ç§»çŠ¶æ€é€»è¾‘è‡³ Reducer ä¸­</a></li></ul><p>å½“ State åŠå…¶å¤„ç†é€»è¾‘é€æ¸å¢åŠ æ—¶ï¼ˆæ¯”å¦‚ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨çš„ Stateï¼Œå¯¹åº”çš„å¤„ç†é€»è¾‘å¯èƒ½æœ‰å¢åŠ ä»»åŠ¡ã€ä¿®æ”¹ä»»åŠ¡çŠ¶æ€ã€åˆ é™¤ä»»åŠ¡ç­‰ï¼‰ï¼Œä¸ºäº†é™ä½å¤æ‚åº¦ï¼Œå°±éœ€è¦å°†æ‰€æœ‰å¤„ç†é€»è¾‘éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªæ˜“äºç†è§£çš„åœ°æ–¹ï¼Œè€Œåœ¨ç»„ä»¶ä¹‹å¤–æ‰¿è½½è¿™äº›çŠ¶æ€å’Œå¤„ç†é€»è¾‘çš„åœ°æ–¹å°±å« Reducerã€‚</p><h2 id="è§£æƒ‘" tabindex="-1"><a class="header-anchor" href="#è§£æƒ‘"><span>è§£æƒ‘</span></a></h2><h3 id="ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º-reducer" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º-reducer"><span>ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º reducer?</span></a></h3><p>å°½ç®¡ <code>reducer</code> å¯ä»¥ â€œå‡å°‘â€ ç»„ä»¶å†…çš„ä»£ç é‡ï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯ä»¥æ•°ç»„ä¸Šçš„ <code>reduce()</code> æ–¹æ³•å‘½åçš„ã€‚</p><p><code>reduce()</code> å…è®¸ä½ å°†æ•°ç»„ä¸­çš„å¤šä¸ªå€¼ â€œç´¯åŠ â€ æˆä¸€ä¸ªå€¼ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> arr</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> sum</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> arr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">reduce</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  (</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">result</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> result</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> number</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 1 + 2 + 3 + 4 + 5</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ä¼ é€’ç»™ <code>reduce</code> çš„å‡½æ•°è¢«ç§°ä¸º â€œreducerâ€ã€‚å®ƒæ¥å— ç›®å‰çš„ç»“æœ å’Œ å½“å‰çš„å€¼ï¼Œç„¶åè¿”å› ä¸‹ä¸€ä¸ªç»“æœã€‚React ä¸­çš„ <code>reducer</code> å’Œè¿™ä¸ªæ˜¯ä¸€æ ·çš„ï¼šå®ƒä»¬éƒ½æ¥å— ç›®å‰çš„çŠ¶æ€ å’Œ <code>action</code> ï¼Œç„¶åè¿”å› ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚è¿™æ ·ï¼Œ<code>action</code> ä¼šéšç€æ—¶é—´æ¨ç§»ç´¯ç§¯åˆ°çŠ¶æ€ä¸­ã€‚</p><h3 id="å¯¹æ¯”-usestate-å’Œ-usereducer" tabindex="-1"><a class="header-anchor" href="#å¯¹æ¯”-usestate-å’Œ-usereducer"><span>å¯¹æ¯” useState å’Œ useReducer</span></a></h3><p>Reducer å¹¶éæ²¡æœ‰ç¼ºç‚¹ï¼ä»¥ä¸‹æ˜¯æ¯”è¾ƒå®ƒä»¬çš„å‡ ç§æ–¹æ³•ï¼š</p><ul><li><strong>ä»£ç ä½“ç§¯</strong>ï¼šé€šå¸¸ï¼Œåœ¨ä½¿ç”¨ <code>useState</code> æ—¶ï¼Œä¸€å¼€å§‹åªéœ€è¦ç¼–å†™å°‘é‡ä»£ç ã€‚è€Œ <code>useReducer</code> å¿…é¡»æå‰ç¼–å†™ <code>reducer</code> å‡½æ•°å’Œéœ€è¦è°ƒåº¦çš„ <code>actions</code>ã€‚ä½†æ˜¯ï¼Œå½“å¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä»¥ç›¸ä¼¼çš„æ–¹å¼ä¿®æ”¹ <code>state</code> æ—¶ï¼Œ<code>useReducer</code> å¯ä»¥å‡å°‘ä»£ç é‡ã€‚</li><li><strong>å¯è¯»æ€§</strong>ï¼šå½“çŠ¶æ€æ›´æ–°é€»è¾‘è¶³å¤Ÿç®€å•æ—¶ï¼Œ<code>useState</code> çš„å¯è¯»æ€§è¿˜è¡Œã€‚ä½†æ˜¯ï¼Œä¸€æ—¦é€»è¾‘å˜å¾—å¤æ‚èµ·æ¥ï¼Œå®ƒä»¬ä¼šä½¿ç»„ä»¶å˜å¾—è‡ƒè‚¿ä¸”éš¾ä»¥é˜…è¯»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>useReducer</code> å…è®¸ä½ å°†çŠ¶æ€æ›´æ–°é€»è¾‘ä¸äº‹ä»¶å¤„ç†ç¨‹åºåˆ†ç¦»å¼€æ¥ã€‚</li><li><strong>å¯è°ƒè¯•æ€§</strong>ï¼šå½“ä½¿ç”¨ <code>useState</code> å‡ºç°é—®é¢˜æ—¶, ä½ å¾ˆéš¾å‘ç°å…·ä½“åŸå› ä»¥åŠä¸ºä»€ä¹ˆã€‚è€Œä½¿ç”¨ <code>useReducer</code> æ—¶ï¼Œä½ å¯ä»¥åœ¨ <code>reducer</code> å‡½æ•°ä¸­é€šè¿‡æ‰“å°æ—¥å¿—çš„æ–¹å¼æ¥è§‚å¯Ÿæ¯ä¸ªçŠ¶æ€çš„æ›´æ–°ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦æ›´æ–°ï¼ˆæ¥è‡ªå“ªä¸ª <code>action</code>ï¼‰ã€‚ å¦‚æœæ‰€æœ‰ <code>action</code> éƒ½æ²¡é—®é¢˜ï¼Œä½ å°±çŸ¥é“é—®é¢˜å‡ºåœ¨äº† <code>reducer</code> æœ¬èº«çš„é€»è¾‘ä¸­ã€‚ç„¶è€Œï¼Œä¸ä½¿ç”¨ <code>useState</code> ç›¸æ¯”ï¼Œä½ å¿…é¡»å•æ­¥æ‰§è¡Œæ›´å¤šçš„ä»£ç ã€‚</li><li><strong>å¯æµ‹è¯•æ€§</strong>ï¼š<code>reducer</code> æ˜¯ä¸€ä¸ªä¸ä¾èµ–äºç»„ä»¶çš„çº¯å‡½æ•°ã€‚è¿™å°±æ„å‘³ç€ä½ å¯ä»¥å•ç‹¬å¯¹å®ƒè¿›è¡Œæµ‹è¯•ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æœ€å¥½æ˜¯åœ¨çœŸå®ç¯å¢ƒä¸­æµ‹è¯•ç»„ä»¶ï¼Œä½†å¯¹äºå¤æ‚çš„çŠ¶æ€æ›´æ–°é€»è¾‘ï¼Œé’ˆå¯¹ç‰¹å®šçš„åˆå§‹çŠ¶æ€å’Œ <code>action</code>ï¼Œæ–­è¨€ <code>reducer</code> è¿”å›çš„ç‰¹å®šçŠ¶æ€ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</li><li><strong>ä¸ªäººåå¥½</strong>ï¼šå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½å–œæ¬¢ç”¨ <code>reducer</code>ï¼Œæ²¡å…³ç³»ï¼Œè¿™æ˜¯ä¸ªäººåå¥½é—®é¢˜ã€‚ä½ å¯ä»¥éšæ—¶åœ¨ <code>useState</code> å’Œ <code>useReducer</code> ä¹‹é—´åˆ‡æ¢ï¼Œå®ƒä»¬èƒ½åšçš„äº‹æƒ…æ˜¯ä¸€æ ·çš„ï¼</li></ul><p>å¦‚æœä½ åœ¨ä¿®æ”¹æŸäº›ç»„ä»¶çŠ¶æ€æ—¶ç»å¸¸å‡ºç°é—®é¢˜æˆ–è€…æƒ³ç»™ç»„ä»¶æ·»åŠ æ›´å¤šé€»è¾‘æ—¶ï¼Œæˆ‘ä»¬å»ºè®®ä½ è¿˜æ˜¯ä½¿ç”¨ <code>reducer</code>ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿä¸å¿…æ•´ä¸ªé¡¹ç›®éƒ½ç”¨ <code>reducer</code>ï¼Œè¿™æ˜¯å¯ä»¥è‡ªç”±æ­é…çš„ã€‚ä½ ç”šè‡³å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶ä½¿ç”¨ <code>useState</code> å’Œ <code>useReducer</code>ã€‚</p><h3 id="å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„-reducer" tabindex="-1"><a class="header-anchor" href="#å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„-reducer"><span>å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„ reducer</span></a></h3><p>é¦–å…ˆï¼Œ<strong><code>reducer</code> éœ€è¦æ˜¯ä¸ªçº¯å‡½æ•°</strong>ï¼Œå³å½“è¾“å…¥ç›¸åŒæ—¶ï¼Œè¾“å‡ºä¹Ÿæ˜¯ç›¸åŒçš„ã€‚å®ƒä»¬ä¸åº”è¯¥åŒ…å«å¼‚æ­¥è¯·æ±‚ã€å®šæ—¶å™¨æˆ–è€…ä»»ä½•å‰¯ä½œç”¨ï¼ˆå¯¹ç»„ä»¶å¤–éƒ¨æœ‰å½±å“çš„æ“ä½œï¼‰ã€‚å®ƒä»¬åº”è¯¥ä»¥ä¸å¯å˜å€¼çš„æ–¹å¼å»æ›´æ–°å¯¹è±¡å’Œæ•°ç»„ï¼Œå› æ­¤å½“ <code>state</code> æ˜¯å¯¹è±¡æˆ–æ•°æ®æ—¶ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ <code>state</code>ï¼Œè€Œæ˜¯åº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡æˆ–æ•°æ®ã€‚å¦‚ä¸Šä¸€å°èŠ‚çš„æ‰€ç¤ºã€‚</p><p>å…¶æ¬¡ï¼Œ<strong>æ¯ä¸ª <code>action</code> éƒ½æè¿°äº†ä¸€ä¸ªå•ä¸€çš„ç”¨æˆ·äº¤äº’</strong>ï¼Œå³ä½¿å®ƒä¼šå¼•å‘æ•°æ®çš„å¤šä¸ªå˜åŒ–ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç”¨æˆ·åœ¨ä¸€ä¸ªç”± <code>reducer</code> ç®¡ç†çš„è¡¨å•ï¼ˆåŒ…å«äº”ä¸ªè¡¨å•é¡¹ï¼‰ä¸­ç‚¹å‡»äº† é‡ç½®æŒ‰é’®ï¼Œé‚£ä¹ˆ <code>dispatch</code> ä¸€ä¸ª <code>reset_form</code> çš„ <code>action</code> æ¯” <code>dispatch</code> äº”ä¸ªå•ç‹¬çš„ <code>set_field</code> çš„ <code>action</code> æ›´åŠ åˆç†ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ª <code>reducer</code> ä¸­æ‰“å°äº†æ‰€æœ‰çš„ <code>action</code> æ—¥å¿—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¥å¿—åº”è¯¥æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œå®ƒèƒ½è®©ä½ ä»¥æŸç§æ­¥éª¤å¤ç°å·²å‘ç”Ÿçš„äº¤äº’æˆ–å“åº”ã€‚è¿™å¯¹ä»£ç è°ƒè¯•å¾ˆæœ‰å¸®åŠ©ï¼</p><h2 id="æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹"><span>æ³¨æ„äº‹é¡¹</span></a></h2><h3 id="state-æ˜¯åªè¯»çš„-å³ä½¿æ˜¯å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿä¸è¦å°è¯•ä¿®æ”¹å®ƒ" tabindex="-1"><a class="header-anchor" href="#state-æ˜¯åªè¯»çš„-å³ä½¿æ˜¯å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿä¸è¦å°è¯•ä¿®æ”¹å®ƒ"><span>state æ˜¯åªè¯»çš„ï¼Œå³ä½¿æ˜¯å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿä¸è¦å°è¯•ä¿®æ”¹å®ƒ</span></a></h3><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> reducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    switch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;incremented_age&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // ğŸš© ä¸è¦åƒä¸‹é¢è¿™æ ·ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„ stateï¼š</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">age</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">age</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­£ç¡®çš„åšæ³•æ˜¯è¿”å›æ–°çš„å¯¹è±¡ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> reducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    switch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;incremented_age&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // âœ… æ­£ç¡®çš„åšæ³•æ˜¯è¿”å›æ–°çš„å¯¹è±¡</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">                ...</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                age</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">age</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            };</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é¿å…é‡æ–°åˆ›å»ºåˆå§‹å€¼" tabindex="-1"><a class="header-anchor" href="#é¿å…é‡æ–°åˆ›å»ºåˆå§‹å€¼"><span>é¿å…é‡æ–°åˆ›å»ºåˆå§‹å€¼</span></a></h3><p>React ä¼šä¿å­˜ <code>state</code> çš„åˆå§‹å€¼å¹¶åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶å¿½ç•¥å®ƒã€‚</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createInitialState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // ...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TodoList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">reducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">createInitialState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // ...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶ <code>createInitialState(username)</code> çš„è¿”å›å€¼åªç”¨äºåˆæ¬¡æ¸²æŸ“ï¼Œä½†æ˜¯åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœå®ƒåˆ›å»ºäº†æ¯”è¾ƒå¤§çš„æ•°ç»„æˆ–è€…æ‰§è¡Œäº†æ˜‚è´µçš„è®¡ç®—å°±ä¼šæµªè´¹æ€§èƒ½ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ç»™ <code>useReducer</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥åˆå§‹åŒ–å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> createInitialState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;createInitialState æ‰§è¡Œ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// åªä¼šåœ¨ç»„ä»¶åˆå§‹åŒ–æ¸²æŸ“æ—¶æ‰§è¡Œï¼Œåç»­è°ƒç”¨ dispatch ä¿®æ”¹ state å¯¼è‡´é‡æ–°æ¸²æŸ“æ—¶ï¼ŒcreateInitialState ä¸å†æ‰§è¡Œ</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // ...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TodoList</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">reducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">createInitialState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // è°ƒç”¨ dispatch ä¿®æ”¹ state</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  // ...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ä½ ä¼ å…¥çš„å‚æ•°æ˜¯ <code>createInitialState</code> è¿™ä¸ªå‡½æ•°è‡ªèº«ï¼Œè€Œä¸æ˜¯æ‰§è¡Œ <code>createInitialState()</code> åçš„è¿”å›å€¼ã€‚è¿™æ ·ä¼ å‚å°±å¯ä»¥ä¿è¯åˆå§‹åŒ–å‡½æ•°ä¸ä¼šå†æ¬¡è¿è¡Œã€‚</p><p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>createInitialState</code> æœ‰ä¸€ä¸ª <code>username</code> å‚æ•°ã€‚å¦‚æœåˆå§‹åŒ–å‡½æ•°ä¸éœ€è¦å‚æ•°å°±å¯ä»¥è®¡ç®—å‡ºåˆå§‹å€¼ï¼Œå¯ä»¥æŠŠ <code>useReducer</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ”¹ä¸º <code>null</code>ã€‚</p><h3 id="dispatch-äº†ä¸€ä¸ª-action-ä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„-state" tabindex="-1"><a class="header-anchor" href="#dispatch-äº†ä¸€ä¸ª-action-ä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„-state"><span>dispatch äº†ä¸€ä¸ª actionï¼Œä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„ state</span></a></h3><p>ç±»ä¼¼ <code>useState</code>ï¼Œ<code>useReducer</code> é‡Œ <code>dispatch</code> äº†ä¸€ä¸ª <code>action</code>ï¼Œä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„ <code>state</code>ã€‚</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 42</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({ </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;incremented_age&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> }); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ç”¨ 43 è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼ˆä¸‹ä¸€æ¬¡ï¼‰</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">  console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// è¿˜æ˜¯ 42ï¼</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  setTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(() </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">age</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ä¸€æ ·æ˜¯ 42ï¼</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  }, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å› ä¸º <code>state</code> çš„è¡Œä¸ºå’Œå¿«ç…§ä¸€æ ·ã€‚æ›´æ–° <code>state</code> ä¼šä½¿ç”¨æ–°çš„å€¼æ¥å¯¹ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜å½“å‰æ‰§è¡Œçš„äº‹ä»¶å¤„ç†å‡½æ•°é‡Œé¢ <code>state</code> çš„å€¼ã€‚</p><p>å¦‚æœä½ éœ€è¦è·å–æ›´æ–°åçš„ <code>state</code>ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ <code>reducer</code> æ¥å¾—åˆ°ç»“æœï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> action</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;incremented_age&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> };</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> nextState</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> reducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// { age: 42 }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">nextState</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// { age: 43 }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªæŠ¥é”™-too-many-re-renders" tabindex="-1"><a class="header-anchor" href="#æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªæŠ¥é”™-too-many-re-renders"><span>æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªæŠ¥é”™ï¼šâ€œToo many re-rendersâ€</span></a></h3><p>ä½ å¯èƒ½ä¼šæ”¶åˆ°è¿™æ ·ä¸€æ¡æŠ¥é”™ä¿¡æ¯ï¼š<code>Too many re-renders. React limits the number of renders to prevent an infinite loop.</code>ã€‚è¿™é€šå¸¸æ˜¯åœ¨æ¸²æŸ“æœŸé—´ <code>dispatch</code> äº† <code>action</code> è€Œå¯¼è‡´ç»„ä»¶è¿›å…¥äº†æ— é™å¾ªç¯ï¼š<code>dispatch</code>ï¼ˆä¼šå¯¼è‡´ä¸€æ¬¡é‡æ–°æ¸²æŸ“ï¼‰ã€æ¸²æŸ“ã€<code>dispatch</code>ï¼ˆå†æ¬¡å¯¼è‡´é‡æ–°æ¸²æŸ“ï¼‰ï¼Œç„¶åæ— é™å¾ªç¯ã€‚å¤§å¤šæ•°è¿™æ ·çš„é”™è¯¯æ˜¯ç”±äºäº‹ä»¶å¤„ç†å‡½æ•°ä¸­å­˜åœ¨é”™è¯¯çš„é€»è¾‘ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// ğŸš© é”™è¯¯ï¼šæ¸²æŸ“æœŸé—´è°ƒç”¨äº†å¤„ç†å‡½æ•°</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Click me&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// âœ… ä¿®å¤ï¼šä¼ é€’ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯è°ƒç”¨</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Click me&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// âœ… ä¿®å¤ï¼šä¼ é€’ä¸€ä¸ªå†…è”çš„ç®­å¤´å‡½æ•°</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onClick</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleClick</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Click me&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">button</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ æ²¡æœ‰å‘ç°ä¸Šè¿°é”™è¯¯ï¼Œåœ¨æ§åˆ¶å°ç‚¹å¼€æŠ¥é”™æ—è¾¹çš„ç®­å¤´ä»¥æŸ¥çœ‹é”™è¯¯å †æ ˆï¼Œä»ä¸­æŸ¥æ‰¾æ˜¯å“ªä¸ª <code>dispatch</code> å‡½æ•°å¼•å‘çš„é”™è¯¯ã€‚</p><h3 id="ä½¿ç”¨-immer-ç®€åŒ–-reducer" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-immer-ç®€åŒ–-reducer"><span>ä½¿ç”¨ Immer ç®€åŒ– reducer</span></a></h3><p>ä¸åœ¨å¹³å¸¸çš„ <code>state</code> ä¸­ä¿®æ”¹å¯¹è±¡å’Œæ•°ç»„ä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ Immer è¿™ä¸ªåº“æ¥ç®€åŒ– <code>reducer</code>ã€‚åœ¨è¿™é‡Œï¼Œ<code>useImmerReducer</code> è®©ä½ å¯ä»¥é€šè¿‡ <code>push</code> æˆ– <code>arr[i] =</code> æ¥ä¿®æ”¹ <code>state</code>ï¼š</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> { </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">useImmerReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;use-immer&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> AddTask</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;./AddTask.js&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> TaskList</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;./TaskList.js&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">let</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> nextId</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> initialTasks</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;å‚è§‚å¡å¤«å¡åšç‰©é¦†&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">done</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">},</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;çœ‹æœ¨å¶æˆ&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">done</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">},</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;æ‰“å¡åˆ—ä¾¬å¢™&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">done</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">},</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">];</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> tasksReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">draft</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    switch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;added&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å¯ä»¥ç›´æ¥ä½¿ç”¨ push</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            draft</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">push</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                id</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">                done</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> false</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            });</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            break</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        case</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;changed&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: {</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            const</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;"> index</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> draft</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">findIndex</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> ===</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            // å¯ä»¥ç›´æ¥ä½¿ç”¨ arr[i] = xxx</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            draft</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">index</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> action</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">            break</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // ...</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#E45649;--shiki-dark:#C678DD;"> default</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TaskApp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() {</span></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // å°† useReducer æ”¹æˆ useImmerReducer</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    const</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">tasks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#E5C07B;">dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">] </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> useImmerReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tasksReducer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">initialTasks</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleAddTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            type</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;added&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            id</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> nextId</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">++</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            text</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> text</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    function</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> handleChangeTask</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>\n<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        dispatch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">({</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            type</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;changed&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            task</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> task</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        });</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;å¸ƒæ‹‰æ ¼çš„è¡Œç¨‹å®‰æ’&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">h1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">AddTask</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;"> onAddTask</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handleAddTask</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">TaskList</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">                tasks</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">tasks</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">                onChangeTask</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handleChangeTask</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>\n<span class="line"><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">                onDeleteTask</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">{</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handleDeleteTask</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">}</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            /&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/&gt;</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    );</span></span>\n<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Reducer åº”è¯¥æ˜¯çº¯å‡€çš„ï¼Œæ‰€ä»¥å®ƒä»¬ä¸åº”è¯¥å»ä¿®æ”¹ <code>state</code>ã€‚è€Œ Immer ä¸ºä½ æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„ <code>draft</code> å¯¹è±¡ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒå®‰å…¨åœ°ä¿®æ”¹ <code>state</code>ã€‚</p><p><strong>åœ¨åº•å±‚ï¼ŒImmer ä¼šåŸºäºå½“å‰ <code>state</code> åˆ›å»ºä¸€ä¸ªå‰¯æœ¬</strong>ã€‚è¿™å°±æ˜¯é€šè¿‡ <code>useImmerReducer</code> æ¥ç®¡ç† <code>reducer</code> æ—¶ï¼Œå¯ä»¥ä¿®æ”¹ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä¸”ä¸éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„ <code>state</code> çš„åŸå› ã€‚</p>', 45)),
    createVNode(_component_global_config)
  ]);
}
const useReducer_html = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__file", "useReducer.html.vue"]]);
const data = JSON.parse('{"path":"/react/hooks/useReducer.html","title":"useReducer","lang":"en-US","frontmatter":{"description":"useReducer è‹¥æƒ³è¯¦ç»†äº†è§£ï¼Œè¯·é˜…è¯»å¦‚ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š React å®˜æ–¹æ–‡æ¡£ - useReducer React å®˜æ–¹æ–‡æ¡£ - è¿ç§»çŠ¶æ€é€»è¾‘è‡³ Reducer ä¸­ å½“ State åŠå…¶å¤„ç†é€»è¾‘é€æ¸å¢åŠ æ—¶ï¼ˆæ¯”å¦‚ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨çš„ Stateï¼Œå¯¹åº”çš„å¤„ç†é€»è¾‘å¯èƒ½æœ‰å¢åŠ ä»»åŠ¡ã€ä¿®æ”¹ä»»åŠ¡çŠ¶æ€ã€åˆ é™¤ä»»åŠ¡ç­‰ï¼‰ï¼Œä¸ºäº†é™ä½å¤æ‚åº¦ï¼Œå°±éœ€è¦å°†æ‰€æœ‰å¤„ç†é€»è¾‘éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªæ˜“äºç†è§£...","head":[["meta",{"property":"og:url","content":"https://blog.windstone.cc/react/hooks/useReducer.html"}],["meta",{"property":"og:site_name","content":"é£åŠ¨ä¹‹çŸ³çš„åšå®¢"}],["meta",{"property":"og:title","content":"useReducer"}],["meta",{"property":"og:description","content":"useReducer è‹¥æƒ³è¯¦ç»†äº†è§£ï¼Œè¯·é˜…è¯»å¦‚ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š React å®˜æ–¹æ–‡æ¡£ - useReducer React å®˜æ–¹æ–‡æ¡£ - è¿ç§»çŠ¶æ€é€»è¾‘è‡³ Reducer ä¸­ å½“ State åŠå…¶å¤„ç†é€»è¾‘é€æ¸å¢åŠ æ—¶ï¼ˆæ¯”å¦‚ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨çš„ Stateï¼Œå¯¹åº”çš„å¤„ç†é€»è¾‘å¯èƒ½æœ‰å¢åŠ ä»»åŠ¡ã€ä¿®æ”¹ä»»åŠ¡çŠ¶æ€ã€åˆ é™¤ä»»åŠ¡ç­‰ï¼‰ï¼Œä¸ºäº†é™ä½å¤æ‚åº¦ï¼Œå°±éœ€è¦å°†æ‰€æœ‰å¤„ç†é€»è¾‘éƒ½å­˜æ”¾åœ¨ä¸€ä¸ªæ˜“äºç†è§£..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-10-22T03:59:06.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-22T03:59:06.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"useReducer\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-22T03:59:06.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"è§£æƒ‘","slug":"è§£æƒ‘","link":"#è§£æƒ‘","children":[{"level":3,"title":"ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º reducer?","slug":"ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º-reducer","link":"#ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º-reducer","children":[]},{"level":3,"title":"å¯¹æ¯” useState å’Œ useReducer","slug":"å¯¹æ¯”-usestate-å’Œ-usereducer","link":"#å¯¹æ¯”-usestate-å’Œ-usereducer","children":[]},{"level":3,"title":"å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„ reducer","slug":"å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„-reducer","link":"#å¦‚ä½•ç¼–å†™ä¸€ä¸ªå¥½çš„-reducer","children":[]}]},{"level":2,"title":"æ³¨æ„äº‹é¡¹","slug":"æ³¨æ„äº‹é¡¹","link":"#æ³¨æ„äº‹é¡¹","children":[{"level":3,"title":"state æ˜¯åªè¯»çš„ï¼Œå³ä½¿æ˜¯å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿä¸è¦å°è¯•ä¿®æ”¹å®ƒ","slug":"state-æ˜¯åªè¯»çš„-å³ä½¿æ˜¯å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿä¸è¦å°è¯•ä¿®æ”¹å®ƒ","link":"#state-æ˜¯åªè¯»çš„-å³ä½¿æ˜¯å¯¹è±¡æˆ–æ•°ç»„ä¹Ÿä¸è¦å°è¯•ä¿®æ”¹å®ƒ","children":[]},{"level":3,"title":"é¿å…é‡æ–°åˆ›å»ºåˆå§‹å€¼","slug":"é¿å…é‡æ–°åˆ›å»ºåˆå§‹å€¼","link":"#é¿å…é‡æ–°åˆ›å»ºåˆå§‹å€¼","children":[]},{"level":3,"title":"dispatch äº†ä¸€ä¸ª actionï¼Œä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„ state","slug":"dispatch-äº†ä¸€ä¸ª-action-ä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„-state","link":"#dispatch-äº†ä¸€ä¸ª-action-ä¸ä¼šæ”¹å˜å½“å‰æ¸²æŸ“çš„-state","children":[]},{"level":3,"title":"æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªæŠ¥é”™ï¼šâ€œToo many re-rendersâ€","slug":"æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªæŠ¥é”™-too-many-re-renders","link":"#æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªæŠ¥é”™-too-many-re-renders","children":[]},{"level":3,"title":"ä½¿ç”¨ Immer ç®€åŒ– reducer","slug":"ä½¿ç”¨-immer-ç®€åŒ–-reducer","link":"#ä½¿ç”¨-immer-ç®€åŒ–-reducer","children":[]}]}],"git":{"createdTime":1729569546000,"updatedTime":1729569546000,"contributors":[{"name":"wind-stone","email":"wind-stone@qq.com","commits":1}]},"readingTime":{"minutes":7.33,"words":2199},"filePathRelative":"react/hooks/useReducer.md","localizedDate":"October 22, 2024","autoDesc":true}');
export {
  useReducer_html as comp,
  data
};
